---
import BaseHead from "../components/BaseHead.astro";
import GlobalStyles from "../components/GlobalStyles.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";

interface Props {
  title?: string;
  description?: string;
}

const { title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props;

const navItems = [
  { name: "projects", path: "projects" },
  // { name: "writing", path: "blog" },
  // { name: "resume", path: "resume.pdf" },
];

const currentPath = Astro.url.pathname;

// Helper to handle base path
const getPath = (path: string) => {
  const base = import.meta.env.BASE_URL;
  // Remove leading slash from path if base ends with slash to avoid double slashes
  const cleanPath = path.startsWith("/") ? path.slice(1) : path;
  return `${base}${cleanPath}`;
};
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <GlobalStyles />
  </head>
  <body>
    <div class="container">
      <header class="site-header">
        <a href={getPath("")} class="site-title">{SITE_TITLE}</a>
        <nav class="nav-links">
          {
            navItems.map((item) => {
              const fullPath = getPath(item.path);
              return (
                <a
                  href={fullPath}
                  class:list={[
                    "nav-link",
                    {
                      active:
                        currentPath === fullPath ||
                        (item.path !== "" && currentPath.startsWith(fullPath)),
                    },
                  ]}
                >
                  {item.name}
                </a>
              );
            })
          }
        </nav>
      </header>
      <main class="content">
        <slot />
      </main>

      <footer
        style="margin-top: 4rem; border-top: 1px solid #eee; padding-top: 2rem; font-size: 0.9rem; color: #666;"
      >
        <div style="display: flex; gap: 1rem;">
          <a
            href="https://github.com/jeremyarde"
            target="_blank"
            class="nav-link">GitHub</a
          >
          <a href="https://x.com/jeremyarde" target="_blank" class="nav-link"
            >Twitter</a
          >
          <a href="mailto:jere.arde@gmail.com" class="nav-link">Email</a>
        </div>
      </footer>
    </div>
  </body>
</html>
